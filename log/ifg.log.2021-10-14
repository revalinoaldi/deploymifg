[2021-10-15 00:56:21.593] INFO [4561591744] - {"req_id": "JIO7OM20211015005621", "http_method": "POST", "url_path": "/prepaid/req_payment", "headers": [["host", "0.0.0.0:3333"], ["user-agent", "python-requests/2.24.0"], ["accept-encoding", "gzip, deflate"], ["accept", "*/*"], ["connection", "keep-alive"], ["content-length", "260"], ["content-type", "application/json"]], "query_param": [], "ip_forwarded": null, "ip_client_host": "127.0.0.1", "request_body": "{\"invoice_no\": \"abc123\", \"total_amount\": \"5000\", \"customer\": {\"custid\": \"123\", \"name\": \"dimas\", \"phone\": \"232132131\", \"address\": \"12323sdwqwq\"}, \"line_items\": [{\"name\": \"test\", \"price\": \"5000\", \"qty\": \"1\"}], \"paytype\": \"cc\", \"payvendor\": \"doku\", \"bank\": \"bca\"}", "error": "1 validation error for Request\nbody -> customer -> email\n  field required (type=value_error.missing)"}
[2021-10-15 00:57:16.078] ERROR [4569390528] - {"req_id": "EOHQY420211015005715", "http_method": "POST", "url_path": "/prepaid/req_payment", "headers": [["host", "0.0.0.0:3333"], ["user-agent", "python-requests/2.24.0"], ["accept-encoding", "gzip, deflate"], ["accept", "*/*"], ["connection", "keep-alive"], ["content-length", "288"], ["content-type", "application/json"]], "query_param": [], "ip_forwarded": null, "ip_client_host": "127.0.0.1", "request_body": "{\"invoice_no\": \"abc123\", \"total_amount\": \"5000\", \"customer\": {\"custid\": \"123\", \"name\": \"dimas\", \"phone\": \"232132131\", \"address\": \"12323sdwqwq\", \"email\": \"ada@bababa.comm\"}, \"line_items\": [{\"name\": \"test\", \"price\": \"5000\", \"qty\": \"1\"}], \"paytype\": \"cc\", \"payvendor\": \"doku\", \"bank\": \"bca\"}", "error": "Single '}' encountered in format string", "trace": "[FrameInfo(frame=<frame at 0x7ffa097671e0, file './routers/__init__.py', line 69, code custom_route_handler>, filename='./routers/__init__.py', lineno=45, function='custom_route_handler', code_context=['                response: Response = await original_route_handler(request)\\n'], index=0), FrameInfo(frame=<frame at 0x7ffa09767c70, file '/usr/local/lib/python3.8/site-packages/fastapi/routing.py', line 226, code app>, filename='/usr/local/lib/python3.8/site-packages/fastapi/routing.py', lineno=226, function='app', code_context=['            raw_response = await run_endpoint_function(\\n'], index=0), FrameInfo(frame=<frame at 0x10551fa60, file '/usr/local/lib/python3.8/site-packages/fastapi/routing.py', line 161, code run_endpoint_function>, filename='/usr/local/lib/python3.8/site-packages/fastapi/routing.py', lineno=161, function='run_endpoint_function', code_context=['        return await run_in_threadpool(dependant.call, **values)\\n'], index=0), FrameInfo(frame=<frame at 0x10551cb20, file '/usr/local/lib/python3.8/site-packages/starlette/concurrency.py', line 40, code run_in_threadpool>, filename='/usr/local/lib/python3.8/site-packages/starlette/concurrency.py', lineno=40, function='run_in_threadpool', code_context=['    return await loop.run_in_executor(None, func, *args)\\n'], index=0), FrameInfo(frame=<frame at 0x105524610, file '/usr/local/Cellar/python@3.8/3.8.5/Frameworks/Python.framework/Versions/3.8/lib/python3.8/concurrent/futures/thread.py', line 63, code run>, filename='/usr/local/Cellar/python@3.8/3.8.5/Frameworks/Python.framework/Versions/3.8/lib/python3.8/concurrent/futures/thread.py', lineno=57, function='run', code_context=['            result = self.fn(*self.args, **self.kwargs)\\n'], index=0), FrameInfo(frame=<frame at 0x105527040, file './routers/payment.py', line 13, code req_payment>, filename='./routers/payment.py', lineno=13, function='req_payment', code_context=[\"    dl = importlib.import_module('vendors.{}.{}}'.format(data.payvendor, data.paytype))\\n\"], index=0)]"}
Traceback (most recent call last):
  File "./routers/__init__.py", line 45, in custom_route_handler
    response: Response = await original_route_handler(request)
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 226, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 161, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.8/site-packages/starlette/concurrency.py", line 40, in run_in_threadpool
    return await loop.run_in_executor(None, func, *args)
  File "/usr/local/Cellar/python@3.8/3.8.5/Frameworks/Python.framework/Versions/3.8/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "./routers/payment.py", line 13, in req_payment
    dl = importlib.import_module('vendors.{}.{}}'.format(data.payvendor, data.paytype))
ValueError: Single '}' encountered in format string
[2021-10-15 00:57:34.538] INFO [4415376832] - {"req_id": "TIFMY720211015005734", "http_method": "POST", "url_path": "/prepaid/req_payment", "headers": [["host", "0.0.0.0:3333"], ["user-agent", "python-requests/2.24.0"], ["accept-encoding", "gzip, deflate"], ["accept", "*/*"], ["connection", "keep-alive"], ["content-length", "288"], ["content-type", "application/json"]], "query_param": [], "ip_forwarded": null, "ip_client_host": "127.0.0.1", "request_body": "{\"invoice_no\": \"abc123\", \"total_amount\": \"5000\", \"customer\": {\"custid\": \"123\", \"name\": \"dimas\", \"phone\": \"232132131\", \"address\": \"12323sdwqwq\", \"email\": \"ada@bababa.comm\"}, \"line_items\": [{\"name\": \"test\", \"price\": \"5000\", \"qty\": \"1\"}], \"paytype\": \"cc\", \"payvendor\": \"doku\", \"bank\": \"bca\"}", "response_body": "null", "response_time": "10ms", "extras": ["[('host', '0.0.0.0:3333'), ('user-agent', 'python-requests/2.24.0'), ('accept-encoding', 'gzip, deflate'), ('accept', '*/*'), ('connection', 'keep-alive'), ('content-length', '288'), ('content-type', 'application/json')]"]}
[2021-10-15 00:58:08.283] INFO [4604480960] - {"req_id": "YHZ3ZT20211015005808", "http_method": "POST", "url_path": "/prepaid/req_payment", "headers": [["host", "0.0.0.0:3333"], ["user-agent", "python-requests/2.24.0"], ["accept-encoding", "gzip, deflate"], ["accept", "*/*"], ["connection", "keep-alive"], ["content-length", "288"], ["content-type", "application/json"]], "query_param": [], "ip_forwarded": null, "ip_client_host": "127.0.0.1", "request_body": "{\"invoice_no\": \"abc123\", \"total_amount\": \"5000\", \"customer\": {\"custid\": \"123\", \"name\": \"dimas\", \"phone\": \"232132131\", \"address\": \"12323sdwqwq\", \"email\": \"ada@bababa.comm\"}, \"line_items\": [{\"name\": \"test\", \"price\": \"5000\", \"qty\": \"1\"}], \"paytype\": \"cc\", \"payvendor\": \"doku\", \"bank\": \"bca\"}", "response_body": "null", "response_time": "90ms", "extras": ["[('host', '0.0.0.0:3333'), ('user-agent', 'python-requests/2.24.0'), ('accept-encoding', 'gzip, deflate'), ('accept', '*/*'), ('connection', 'keep-alive'), ('content-length', '288'), ('content-type', 'application/json')]"]}
